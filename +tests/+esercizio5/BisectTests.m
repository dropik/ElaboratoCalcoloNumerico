classdef BisectTests < tests.esercizio5.BaseTestCase
    properties(TestParameter)
        input = { ...
            [ -0.5, 0.5 ], ...
            [-1.5, -0.5 ], ...
            [ 0.5, 1.5 ], ...
            [ -1.1, 0.8], ...
            [ -0.8, 1.1], ...
            [ -1.1, 1.1], ...
            [ -1e-16, 1e-16] ...
        };
    
        expectedRoot = { ...
            0, ...
            -1.047197551196598, ...
            1.047197551196598, ...
            -1.047197551196598, ...
            0, ...
            0, ...
            0 ...
        };
    end
    
    properties(Access = protected)
        assertToleranceAmount = 1e-15;
    end

    methods(Access = protected)
        function [result, iterations] = findRoot(this, input)
            [result, iterations] = esercizio5.bisect(...
                this.f, ...
                input(1), ...
                input(2), ...
                this.inputTolerance ...
            );
        end
    end
    
    methods(Test, ParameterCombination = 'sequential')        
        function testNonNumericA(this)
            this.assertError( ...
                @() esercizio5.bisect(this.f, '0', 1, this.inputTolerance), ...
                'inputs:AMustBeNumeric' ...
            );
        end
        
        function testNonNumericB(this)
            this.assertError( ...
                @() esercizio5.bisect(this.f, 0, '1', this.inputTolerance), ...
                'inputs:BMustBeNumeric' ...
            );
        end
        
        function testAGraterThanB(this)
            this.assertError( ...
                @() esercizio5.bisect(this.f, 1, 0, this.inputTolerance), ...
                'inputs:AMustBeLessThanB' ...
            );
        end
        
        function testAEqualToB(this)
            this.assertError( ...
                @() esercizio5.bisect(this.f, 0, 0, this.inputTolerance), ...
                'inputs:AMustBeLessThanB' ...
            );
        end
        
        function testTolLessThanZero(this)
            this.assertError( ...
                @() esercizio5.bisect(this.f, 0, 1, -1), ...
                'inputs:ToleranceMustBePositive' ...
            );
        end
        
        function testTolEqualToZero(this)
            this.assertError( ...
                @() esercizio5.bisect(this.f, 0, 1, 0), ...
                'inputs:ToleranceMustBePositive' ...
            );
        end
        
        function testTolNonNumeric(this)
            this.assertError( ...
                @() esercizio5.bisect(this.f, 0, 1, '1e-10'), ...
                'inputs:ToleranceMustBeNumeric' ...
            );
        end
    end
end